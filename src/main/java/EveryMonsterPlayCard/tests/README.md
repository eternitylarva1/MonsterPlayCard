# 动作转换系统测试套件

本目录包含了通用动作-意图转换系统的完整测试套件，用于验证系统的功能、性能和集成性。

## 测试结构

### 测试类

1. **ActionConversionTest.java** - 功能测试
   - 测试单个动作转换
   - 测试动作序列转换
   - 测试卡牌动作转换
   - 测试转换验证
   - 测试服务层功能

2. **PerformanceTest.java** - 性能测试
   - 测试单个动作转换性能
   - 测试动作序列转换性能
   - 测试卡牌动作转换性能
   - 测试服务层性能
   - 测试内存使用

3. **IntegrationTest.java** - 集成测试
   - 测试完整转换流程
   - 测试复杂卡牌转换
   - 测试多动作序列转换
   - 测试配置系统集成
   - 测试事件系统集成
   - 测试错误处理

4. **TestSuite.java** - 测试套件
   - 统一运行所有测试
   - 支持分类运行测试
   - 提供测试统计信息

## 使用方法

### 运行所有测试

```bash
java EveryMonsterPlayCard.tests.TestSuite
```

### 分类运行测试

```bash
# 只运行功能测试
java EveryMonsterPlayCard.tests.TestSuite functional

# 只运行性能测试
java EveryMonsterPlayCard.tests.TestSuite performance

# 只运行集成测试
java EveryMonsterPlayCard.tests.TestSuite integration
```

### 单独运行测试类

```bash
# 运行功能测试
java EveryMonsterPlayCard.tests.ActionConversionTest

# 运行性能测试
java EveryMonsterPlayCard.tests.PerformanceTest

# 运行集成测试
java EveryMonsterPlayCard.tests.IntegrationTest
```

## 测试内容

### 功能测试

- **伤害动作转换** - 验证伤害动作正确转换为攻击意图
- **格挡动作转换** - 验证格挡动作正确转换为防御意图
- **能力动作转换** - 验证能力动作正确转换为增益/减益意图
- **抽牌动作转换** - 验证抽牌动作正确转换为增益意图
- **能量动作转换** - 验证能量动作正确转换为增益意图
- **治疗动作转换** - 验证治疗动作正确转换为增益意图
- **弃牌动作转换** - 验证弃牌动作正确转换为减益意图
- **消耗动作转换** - 验证消耗动作正确转换为减益意图

### 性能测试

- **转换速度测试** - 测试各种动作类型的转换速度
- **序列转换测试** - 测试不同长度动作序列的转换性能
- **卡牌转换测试** - 测试各种卡牌的转换性能
- **内存使用测试** - 测试转换过程中的内存使用情况
- **服务层性能** - 测试服务层的整体性能

### 集成测试

- **完整流程测试** - 测试从动作到意图的完整转换流程
- **复杂卡牌测试** - 测试多效果卡牌的转换
- **多动作序列测试** - 测试复杂动作序列的转换
- **配置系统测试** - 测试配置系统的集成
- **事件系统测试** - 测试事件系统的集成
- **错误处理测试** - 测试各种错误情况的处理

## 测试结果

测试运行后会输出详细的测试结果，包括：

- 成功/失败统计
- 转换成功率
- 性能指标
- 错误信息
- 警告信息

## 注意事项

1. 测试需要在游戏环境中运行，确保所有依赖项可用
2. 性能测试可能会消耗较多资源，建议在专用环境中运行
3. 某些测试可能会修改游戏状态，请在测试环境中运行
4. 测试结果可能会因硬件配置不同而有所差异

## 故障排除

### 常见问题

1. **ClassNotFoundException** - 确保所有依赖的类都在类路径中
2. **NoClassDefFoundError** - 检查类文件是否正确编译
3. **NullPointerException** - 检查游戏环境是否正确初始化
4. **性能异常** - 检查系统资源是否充足

### 调试建议

1. 启用详细日志输出
2. 单独运行失败的测试
3. 检查测试环境配置
4. 验证依赖项版本

## 扩展测试

如需添加新的测试：

1. 在相应的测试类中添加测试方法
2. 遵循现有的命名和结构约定
3. 确保测试的独立性和可重复性
4. 更新TestSuite以包含新测试

## 版本历史

- v1.0 - 初始版本，包含基本的功能、性能和集成测试